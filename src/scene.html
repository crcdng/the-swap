<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js"></script>
    <script src="/easyrtc/easyrtc.js"></script>
    <script src="https://unpkg.com/networked-aframe@^0.8.0/dist/networked-aframe.min.js"></script>
    <script src="main.js"></script>
    <!-- <script src="main.js" type="module"></script> -->
</head>

<body>
    <a-scene networked-scene="app: myApp; room: room1; debug: true;">
        <a-assets>
            <template id="avatar-template">
                <a-entity class="avatar">
                    <a-sphere class="head" random-color scale="0.45 0.5 0.4"></a-sphere>
                    <a-entity class="face" position="0 0.05 0">
                        <a-sphere class="eye" color="#efefef" position="0.16 0.1 -0.35" scale="0.12 0.12 0.12">
                            <a-sphere class="pupil" color="#000" position="0 0 -1" scale="0.2 0.2 0.2"></a-sphere>
                        </a-sphere>
                        <a-sphere class="eye" color="#efefef" position="-0.16 0.1 -0.35" scale="0.12 0.12 0.12">
                            <a-sphere class="pupil" color="#000" position="0 0 -1" scale="0.2 0.2 0.2"></a-sphere>
                        </a-sphere>
                    </a-entity>
                </a-entity>
            </template>
            <img id="grid" src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png"
                crossorigin="anonymous">
            <img id="sky" src="https://img.gs/bbdkhfbzkk/2048x2048,stretch/https://i.imgur.com/WqlqEkq.jpg"
                crossorigin="anonymous" />
        </a-assets>

        <a-entity id="player" networked="template:#avatar-template;attachTemplateToLocal:false;" camera
            position="0 1.3 0" spawn-in-circle="radius:3;" wasd-controls look-controls><a-sphere class="head"
            visible="false"
            random-color
          ></a-sphere></a-entity>

        <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
        <a-cylinder position="-1 0.75 3" radius="0.5" height="1.5" color="#5985FF"></a-cylinder>

        <a-entity position="0 0 0" geometry="primitive: plane; width: 10000; height: 10000;" rotation="-90 0 0"
            material="src: #grid; repeat: 10000 10000; transparent: true; metalness:0.6; roughness: 0.4; sphericalEnvMap: #sky;">
        </a-entity>

        <a-entity light="color: #ccccff; intensity: 1; type: ambient;" visible=""></a-entity>
        <a-entity light="color: #ffaaff; intensity: 1.5" position="5 5 5"></a-entity>

        <a-sky src="#sky" rotation="0 -90 0"></a-sky>
    </a-scene>
</body>

</html>